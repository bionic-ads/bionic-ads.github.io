<div class="bionic-campaign-header bionic-header block fullwidth">
                
    <h1 id="campaignname">...</h1>
    <span class="bionic-campaign-summary block fullwidth"><span id="campaignStartDate">...</span> - <span id="campaignEndDate">...</span> 
        <span class="divider">|</span> $ <span id="campaignBudget">...</span> budget 
<!--         <span class="authorize">Not Yet Approved</span> -->
        <span class="divider">|</span> $ <span id="campaignPlanned">...</span> in plan
    </span>
    
    <script type="text/template" class="campaignNav">

    	<ul class="bionic-tab-menu">
    		<% _.each( bionic.campaignNavItems, function( campaignNavItem ){ %>
            <% 
                var url = window.location.href;
                var theID = url.substring(url.lastIndexOf('/') + 1);
                var directory = url.substring(url.lastIndexOf('#/campaign/'));
                var group = campaignNavItem.group;
                
                if (window.location.hash.substr(1,12) == campaignNavItem.page.substr(1,12)){ var currentnav = 'class="current"'; } 

                var notification = '';
                if ( campaignNavItem.name == "Media Plan") {
                    campaignNavItem.notification = '<i class="fa fa-question-circle"></i>';
                }
            %>
    			<li>
    				<a <%= currentnav %> href="<%- campaignNavItem.page %>"><%- campaignNavItem.name %> <%= campaignNavItem.notification %></a>
    			</li>
    
    		<% }); %>
    	</ul>   
    	 
	</script>

</div>


<ul class="bionic-action-menu block custom-form-controls" style="margin-bottom: 5px;">
    <li><a href="templates/modals/settings/add-new-cost.html" rel="modal:open" ><i class="fa fa-plus"></i>Add Bucket</a></li>
    <li id="action-delete" class="row-select disabled"><a><i class="fa fa-trash"></i>Delete</a></li>
    <li class="button-divider"></li>
    <li id="action-lock"  class="row-select"><a><i class="fa fa-lock"></i>Lock</a></li>
    <li id="action-lock"  class="row-select"><a><i class="fa fa-unlock"></i>Unlock</a></li>
    <li id="action-lock"  class="row-select"><a><i class="fa fa-check"></i>Authorization <i class="fa fa-caret-down"></i></a></li>
    <li class="button-divider"></li>
    <li id="action-lock"  class="row-select"><a><i class="fa fa-download"></i>Download</a></li>
    <li style="padding-top: 5px; margin-left: 10px; display: block"><input id="showMonthly" type="checkbox"><label for="showMonthly">Show Monthly</label> </li>
</ul>


<div class="grid fixedTable block budget custom-form-controls" id="grid">
  
  <table class="gridFirstColumnHeader">
      <thead>
          <tr><th class="col-45"><span class="header center">#</span></th><th class="col-30 no-right-border"><input id="cb0" type="checkbox"><label for="cb0"></label></th><th class="col-30 no-left-border no-right-border"><span class="header"><a><i class="fa fa-lock"></i></a></span></th><th class="col-200" style="border-left: 0; "><span class="header" style="padding-left: 5px"><a>Bucket <i class="fa fa-caret-down"></i></a></span></th><th class="col-150"><span><a>Budget</a></span></th><th class="col-150 right"><span><a>Share</a></span></th><th class="col-150"><span><a>Authorization</a></span></th></tr>
      </thead>
  </table>

  <header class="fixedTable-header block">
    <table>
        <thead>
        <tr>
          <th class="col-150 right"><span><a>Lines in Plan</a></span></th><th class="col-150 right"><span class="right"><a>Amount in Plan</a></span></th><th class="col-150 right"><span><a>% Planned</a></span></th><th class="col-150 right"><span><a>Amount Authorized</a></span></th><th class="col-150 right"><span><a>Not Yet Authorized</a></span></th><th class="col-150 right"><span><a>% Authorized</a></span></th><th class="col-150 right"><span><a>Amount Bought</a></span></th><th class="col-150 right"><span><a>Not Yet Bought</a></span></th><th class="col-150 right"><span><a>% Bought</a></span></th><th class="col-150 right"><span><a>Amount Delivered</a></span></th></tr></thead>
    </table>
  </header>
  
  <aside class="fixedTable-sidebar block">
    <table class="table table-bordered grid" id="gridFirstColumns">
        <tbody>
        </tbody>
    </table>
  </aside>
  
  <div class="fixedTable-body block">
    <table class="table table-bordered grid" id="gridBody">
        <tbody>
        </tbody>
    </table>
  </div>
  
</div>


<script>
    
      var costsTab = "CampaignBudget";
    
      $(document).ready( function() {
        
        $(".filterType").click(function () {
            $(".filterTypeMenu").toggle();
        });
        
        
        $(".filterStatus").click(function () {
            $(".filterStatusMenu").toggle();
        });
        
        $('td input').click( function(){
            $("#action-deactivate").toggleClass("disabled");
            $("#action-delete").toggleClass("disabled");
        });
        
        
        Tabletop.init( { key: public_spreadsheet_url,
                         callback: showInfo,
                         wanted: [ costsTab ],
                        // query:["state=done and (name=performance or name=flowchart)"],
                         debug: true } )
      });
        
      function showInfo(data, tabletop) {
    
        $.each( tabletop.sheets(costsTab).all(), function(i, item) {
          
          var rowNumber, symbol,
              tableFirstColumns,
              tableBody;

              if(item.Share.includes("%")){
                  symbol = ""
              } else {
                  symbol = '<span style="padding:0; margin-top:11px;" class="currency-symbol">$</span>';
              }
          
          rowNumber = i++;
          
          if((item.Bucket != "Total") && (item.Bucket != "Unbucketed")){
          
              tableFirstColumns = $('<tr class=""><td class="line-number col-45"></td>');
              tableFirstColumns.append('<td class="col-30 no-right-border"><input id="cb'+i+'" type="checkbox"><label for="cb'+i+'"></label></td>');
              tableFirstColumns.append('<td class="col-30 no-left-border no-right-border"><i class="fa fa-lock"></i></td>');
              tableFirstColumns.append('<td class="col-200 no-left-border" style="border-right:0;"><a href="templates/modals/settings/editcost.html" rel="modal:open" ><span><strong>'+ item.Bucket +'</strong></span></a></td>');
              tableFirstColumns.append('<td class="col-150 right"><span>'+ item.Budget +'</span></td>');
              tableFirstColumns.append('<td class="col-150 right"><span>'+ item.Share +'</span></td>');
              tableFirstColumns.append('<td class="col-150"><span>'+ item.Authorization +'</span></td>');
              tableFirstColumns.append('</tr>');
              tableFirstColumns.appendTo("#gridFirstColumns tbody");
                        
              tableBody = $('<tr class="">');
              tableBody.append('<td class="col-150 right"><span>'+ item.LinesInPlan +'</span></td>');
              tableBody.append('<td class="col-150 right">'+symbol+'<span> '+ item.AmountInPlan +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.PercentPlanned +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.AmountAuthorized +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.NotYetAuthorized +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.PercentAuthorized +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.AmountBought +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.NotYetBought +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.PercentBought +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.AmountDelivered +'</span></td>');
              tableBody.append('</tr>');
              tableBody.appendTo("#gridBody tbody");
                    
          } else {
              
              tableFirstColumns = $('<tr class="total"><td class="line-number col-45"></td>');
              tableFirstColumns.append('<td class="no-left-border" colspan="2" style="width: 260px; border-right:0;"><span><strong>'+ item.Bucket +'</strong></span></td>');
              tableFirstColumns.append('<td class="col-150 right"><span>'+ item.Budget +'</span></td>');
              tableFirstColumns.append('<td class="col-150 right"><span>'+ item.Share +'</span></td>');
              tableFirstColumns.append('<td class="col-150"><span>'+ item.Authorization +'</span></td>');
              tableFirstColumns.append('</tr>');
              tableFirstColumns.appendTo("#gridFirstColumns tbody");
                        
              tableBody = $('<tr class="total">');
              tableBody.append('<td class="col-150 right"><span>'+ item.LinesInPlan +'</span></td>');
              tableBody.append('<td class="col-150 right">'+symbol+'<span> '+ item.AmountInPlan +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.PercentPlanned +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.AmountAuthorized +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.NotYetAuthorized +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.PercentAuthorized +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.AmountBought +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.NotYetBought +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.PercentBought +'</span></td>');
              tableBody.append('<td class="col-150 right"><span> '+ item.AmountDelivered +'</span></td>');
              tableBody.append('</tr>');
              tableBody.appendTo("#gridBody tbody");
              
          }        
                    
        })
    
      }

</script>

<script type="text/javascript">

    // ------------------------------------------------
    // Set Up the Fixed First Column Table
    
    (function() {
      var grid, fixedTable;
    
      fixedTable = function(el) {
        var $body, $header, $sidebar;
        $body = $(el).find('.fixedTable-body');
        $sidebar = $(el).find('.fixedTable-sidebar table');
        $header = $(el).find('.fixedTable-header table');
        return $($body).scroll(function() {
          $($sidebar).css('margin-top', -$($body).scrollTop());
          return $($header).css('margin-left', -$($body).scrollLeft());
        });
      };
    
      grid = new fixedTable($('#grid'));
    
    }).call(this);

    // ------------------------------------------------
    // Make the rows highlight with Fixed First Column   
    
    $(document).on({
    mouseenter: function () {
    var trIndex = $(this).index();
    $("table.grid").each(function(index) {
        $(this).find("tr:eq("+trIndex+")").addClass("hover")
    });
    },
    mouseleave: function () {
    var trIndex = $(this).index();
    $("table.grid").each(function(index) {
        $(this).find("tr:eq("+trIndex+")").removeClass("hover")
    });
    }
    }, "#grid table tr");
    
</script>



<script type="text/javascript" src="templates/campaign/nav-campaign.js"></script>
<script>if(Campaigns.length > 0){setCampaignInfo();}</script>